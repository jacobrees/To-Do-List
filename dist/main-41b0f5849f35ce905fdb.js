!function(){"use strict";const e=()=>{document.querySelector(".loading-container").classList.toggle("hide-loading-screen")},t=()=>JSON.parse(localStorage.getItem("categoriesArray")),o=(e,t)=>{const o=[...JSON.parse(localStorage.getItem("categoriesArray"))];o[e]=t,localStorage.setItem("categoriesArray",JSON.stringify(o))},n=()=>JSON.parse(localStorage.getItem("todosArray"));const a=document.querySelector(".todos-container");var c=new Isotope(a,{itemSelector:".todo",percentPosition:!0,layoutMode:"masonry",masonry:{columnWidth:".todo",horizontalOrder:!1,gutter:10}});const d=e=>e.trim().toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "),r=e=>e.trim().toLowerCase().replace(/(^\s*\w|[.!?]\s*\w)/g,(e=>e.toUpperCase())),s=document.querySelector(".flash-error-popup-container"),l=e=>{document.querySelector(".flash-error-message").textContent=e,s.classList.toggle("flash-error-todo-popup")},i=document.querySelector("#add-category-title"),u=()=>{const e=document.querySelector(".edit-existing-todo-container");e.classList.contains("show-edit-existing-todo")&&(()=>{const e=document.querySelectorAll("#edit-todo-title, #edit-todo-description");setTimeout((()=>{e.forEach((e=>{e.value=""}))}),250)})();const t=document.querySelectorAll(".todo");let o=null;if(t.forEach((e=>{e.childNodes[1].classList.contains("show-todo-options")&&(o=e)})),!e.classList.contains("show-edit-existing-todo")){const e=document.querySelector("#edit-todo-title"),t=document.querySelector("#edit-todo-description");e.value=o.childNodes[0].childNodes[0].childNodes[0].textContent,t.value=o.childNodes[0].childNodes[1].childNodes[0].textContent}e.classList.toggle("show-edit-existing-todo")},g=()=>{const e=document.querySelector(".add-category-popup-container");e.classList.contains("show-add-category-popup")&&setTimeout((()=>{i.value=""}),250),e.classList.toggle("show-add-category-popup")},m=()=>{const e=document.querySelector(".add-new-todo-container");e.classList.contains("show-add-new-todo")&&(()=>{const e=document.querySelectorAll("#add-todo-title, #add-todo-description"),t=document.querySelectorAll(".category-btn-add");setTimeout((()=>{t.forEach((e=>{e.classList.remove("active-category")})),e.forEach((e=>{e.value=""}))}),250)})(),e.classList.toggle("show-add-new-todo")},p=()=>{let e=document.querySelectorAll(".todo-edit-btn, .cancel-edit-existing-todo-button");e.forEach((e=>{e.replaceWith(e.cloneNode(!0))})),e=document.querySelectorAll(".todo-edit-btn, .cancel-edit-existing-todo-button"),e.forEach((e=>{e.addEventListener("click",(()=>{u()}))}))},h=()=>{let e=document.querySelectorAll(".todo-menu-btn");e.forEach((e=>{e.replaceWith(e.cloneNode(!0))})),e=document.querySelectorAll(".todo-menu-btn"),e.forEach((t=>{t.addEventListener("click",(t=>{const o=t.currentTarget.parentElement.parentElement.parentElement.childNodes[1];o.classList.contains("show-todo-options")?o.classList.remove("show-todo-options"):(e.forEach((e=>{e.parentElement.parentElement.parentElement.childNodes[1].classList.remove("show-todo-options")})),o.classList.toggle("show-todo-options"))}))}))},y=()=>{document.querySelector(".delete-todo-popup-container").classList.toggle("show-delete-todo-popup")},C=()=>{let e=document.querySelectorAll(".todo-delete-btn, .cancel-delete-todo-button");e.forEach((e=>{e.replaceWith(e.cloneNode(!0))})),e=document.querySelectorAll(".todo-delete-btn, .cancel-delete-todo-button"),e.forEach((e=>{e.addEventListener("click",(()=>{y()}))}))},L=()=>{document.querySelector(".delete-all-todo-popup-container").classList.toggle("show-delete-all-todo-popup")},S=()=>{document.querySelector(".delete-category-popup-container").classList.toggle("show-delete-category-popup")};let E;const v=(e,t,o)=>{const n=document.createElement("div");n.classList.add("category");const a=document.createElement("button");o?a.classList.add("category-btn","category-btn-sort","active-category"):a.classList.add("category-btn","category-btn-sort"),n.appendChild(a);const c=document.createElement("span");c.classList.add("dot",`dot${e}`),a.appendChild(c);const d=document.createElement("span");return d.classList.add("category-title"),d.textContent=`${t}`,a.appendChild(d),n};var f=()=>{(()=>{document.querySelector(".categories-container").remove();const e=document.createElement("div");e.classList.add("categories-container"),document.querySelector(".categories-side-container").prepend(e),t().filter((e=>null===e.category)).length>2?t().forEach(((t,o)=>{t.category&&e.appendChild(v(o+1,t.category,!0))})):(e.appendChild(v("-all","all",!0)),t().forEach(((t,o)=>{t.category&&e.appendChild(v(o+1,t.category,!1))})))})(),(()=>{const e=document.querySelector(".categories-container");new Flickity(e,{contain:!1,freeScroll:!0,watchCSS:!0,cellAlign:"center",prevNextButtons:!0,pageDots:!1})})(),(()=>{const e=document.querySelectorAll(".category-btn-sort");e.forEach((t=>{t.addEventListener("click",(t=>{t.currentTarget.classList.contains("active-category")||(e.forEach((e=>{e.classList.remove("active-category")})),t.currentTarget.classList.add("active-category"),"all"===t.currentTarget.childNodes[1].textContent?c.arrange({filter:"*"}):c.arrange({filter:`.${t.currentTarget.childNodes[1].textContent}`}))}))}))})(),(()=>{document.querySelector(".add-todo-categories").remove();const e=document.createElement("div");e.classList.add("add-todo-categories"),document.querySelector(".add-new-todo-box").appendChild(e),t().forEach(((t,o)=>{t.category&&e.appendChild(((e,t)=>{const o=document.createElement("div");o.classList.add("category-option");const n=document.createElement("button");n.classList.add("category-btn","category-btn-add"),o.appendChild(n);const a=document.createElement("span");a.classList.add("dot",`dot${e}`),n.appendChild(a);const c=document.createElement("span");return c.classList.add("category-title"),c.textContent=`${t}`,n.appendChild(c),o})(o+1,t.category))}))})(),(()=>{const e=document.querySelectorAll(".category-btn-add");e.forEach((t=>{t.addEventListener("click",(t=>{t.currentTarget.classList.contains("active-category")||(e.forEach((e=>{e.classList.remove("active-category")})),t.currentTarget.classList.add("active-category"))}))}))})(),(()=>{document.querySelector(".edit-categories-btns-container").remove();const e=document.createElement("div");e.classList.add("edit-categories-btns-container"),document.querySelector(".edit-categories-box").appendChild(e),t().forEach(((t,o)=>{t.category&&e.appendChild(((e,t)=>{const o=document.createElement("div");o.classList.add("edit-category");const n=document.createElement("div");n.classList.add("edit-category-container"),o.appendChild(n);const a=document.createElement("span");a.classList.add("dot",`dot${e}`),n.appendChild(a);const c=document.createElement("span");c.classList.add("category-title"),c.textContent=`${t}`,n.appendChild(c);const d=document.createElement("button");d.classList.add("delete-category-btn"),o.appendChild(d);const r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.classList.add("delete-category-svg"),r.setAttribute("viewBox","0 0 24 24"),d.appendChild(r);const s=document.createElementNS("http://www.w3.org/2000/svg","path");return s.setAttribute("d","M23.954 21.03l-9.184-9.095 9.092-9.174-2.832-2.807-9.09 9.179-9.176-9.088-2.81 2.81 9.186 9.105-9.095 9.184 2.81 2.81 9.112-9.192 9.18 9.1z"),r.appendChild(s),o})(o+1,t.category))}))})(),document.querySelector(".delete-category-button").addEventListener("click",(()=>{(()=>{const n=t().findIndex((e=>e.category===E));-1!==n&&(o(n,{category:null}),e(),S(),setTimeout((()=>{f(),(e=>{const t=[...JSON.parse(localStorage.getItem("todosArray"))].filter((t=>t.todoCategory!==e));localStorage.setItem("todosArray",JSON.stringify(t))})(E),c.arrange({filter:"*"}),document.querySelectorAll(".todo").forEach((e=>{e.classList.contains(E)&&(c.remove(e),c.layout())})),e()}),550))})()})),document.querySelectorAll(".delete-category-btn").forEach((e=>{e.addEventListener("click",(e=>{E=e.currentTarget.parentElement.childNodes[0].childNodes[1].textContent}))})),document.querySelectorAll(".delete-category-btn").forEach((e=>{e.addEventListener("click",(()=>{S()}))}))};const T=(e,t,o,n,a)=>{const c=document.createElement("div");c.classList.add("todo",`${e}`);const d=document.createElement("div");return d.classList.add("todo-content"),c.appendChild(d),d.appendChild(((e,t)=>{const o=document.createElement("div");o.classList.add("todo-heading"),t&&o.classList.add("done");const n=document.createElement("h3");n.classList.add("todo-title"),n.textContent=`${e}`,o.appendChild(n);const a=document.createElement("button");a.classList.add("todo-menu-btn"),o.appendChild(a);const c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.classList.add("todo-meatball"),a.appendChild(c);const d=document.createElementNS("http://www.w3.org/2000/svg","path");return d.setAttribute("d","M6 12c0 1.657-1.343 3-3 3s-3-1.343-3-3 1.343-3 3-3 3 1.343 3 3zm9 0c0 1.657-1.343 3-3 3s-3-1.343-3-3 1.343-3 3-3 3 1.343 3 3zm9 0c0 1.657-1.343 3-3 3s-3-1.343-3-3 1.343-3 3-3 3 1.343 3 3z"),c.appendChild(d),o})(o,a)),d.appendChild(((e,t)=>{const o=document.createElement("div");o.classList.add("todo-description"),t&&o.classList.add("done");const n=document.createElement("p");return n.classList.add("todo-paragraph"),n.textContent=`${e}`,o.appendChild(n),o})(n,a)),d.appendChild(((e,t)=>{const o=document.createElement("div");o.classList.add("todo-footer");const n=document.createElement("span");n.classList.add("dot",`dot${e}`),o.appendChild(n);const a=document.createElement("label");a.classList.add("control","control-checkbox"),a.textContent="done",o.appendChild(a);const c=document.createElement("input");c.type="checkbox",c.classList.add("done-checkbox"),t&&(c.checked=!0),a.appendChild(c);const d=document.createElement("span");return d.classList.add("control_indicator"),a.appendChild(d),o})(t,a)),c.appendChild((()=>{const e=document.createElement("div");e.classList.add("todo-options");const t=document.createElement("button");t.classList.add("todo-options-btn","todo-edit-btn"),t.textContent="Edit...",e.appendChild(t);const o=document.createElement("button");return o.classList.add("todo-options-btn","todo-delete-btn"),o.textContent="Delete",e.appendChild(o),e})()),c},N=()=>{const e=document.querySelectorAll(".todo");let t=null;return e.forEach((e=>{e.childNodes[1].classList.contains("show-todo-options")&&(t=e)})),t},b=(e,t,o,n)=>{((e,t,o)=>{const n=[...JSON.parse(localStorage.getItem("todosArray"))],a=n.findIndex((t=>t.todoTitle===e)),c=n.find((t=>t.todoTitle===e));c.todoTitle=t,c.todoDescription=o,n[a]=c,localStorage.setItem("todosArray",JSON.stringify(n))})(e.textContent,o,n),e.textContent=o,t.textContent=n,u()},q=()=>{let e=document.querySelectorAll(".done-checkbox");e.forEach((e=>{e.replaceWith(e.cloneNode(!0))})),e=document.querySelectorAll(".done-checkbox"),e.forEach((e=>{e.addEventListener("change",(e=>{(e=>{const t=e.currentTarget.parentElement.parentElement.parentElement.childNodes[0],o=e.currentTarget.parentElement.parentElement.parentElement.childNodes[1];t.classList.toggle("done"),o.classList.toggle("done"),(e=>{const t=[...JSON.parse(localStorage.getItem("todosArray"))],o=t.findIndex((t=>t.todoTitle===e)),n=t.find((t=>t.todoTitle===e));n.todoDone=!n.todoDone,t[o]=n,localStorage.setItem("todosArray",JSON.stringify(t))})(e.currentTarget.parentElement.parentElement.parentElement.childNodes[0].childNodes[0].textContent)})(e)}))}))},A=()=>{document.querySelector(".add-add-new-todo-button").addEventListener("click",(()=>{const e=d(document.querySelector("#add-todo-title").value),o=r(document.querySelector("#add-todo-description").value),a=document.querySelectorAll(".category-btn-add");let s=null;a.forEach((e=>{e.classList.contains("active-category")&&(s=e)}));const i=n();30===i.length?l("You Cannot Have More Than 30 Todos"):i.some((t=>t.todoTitle===e))?l("Todo Cannot Have Same Title As Existing Todo"):e.length<10?l("Todo Name Cannot Be Less Than 10 Characters Long"):e.length>40?l("Todo Name Cannot Be Greater Than 40 Characters Long"):/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]+/.test(e)?l("Todo Name Cannot Contain Any Special Characters"):o.length<20?l("Todo Description Cannot Be Less Than 20 Characters Long"):o.length>300?l("Todo Description Cannot Be Greater Than 300 Characters Long"):null===s?l("Todo Category Cannot Be Unselected"):((e,o,n,a)=>{(e=>{const t=[...JSON.parse(localStorage.getItem("todosArray"))];t[t.length]=e,localStorage.setItem("todosArray",JSON.stringify(t))})({todoTitle:e,todoDescription:o,todoCategory:n,todoDone:a});const d=t().findIndex((e=>e.category===n))+1;var r,s,l,i;r=n,s=d,l=e,i=o,c.insert(T(r,s,l,i,!1)),h(),p(),C(),q(),m()})(e,o,s.childNodes[1].textContent,!1)})),document.querySelector(".add-edit-existing-todo-button").addEventListener("click",(()=>{const e=N(),t=e.childNodes[0].childNodes[0].childNodes[0],o=e.childNodes[0].childNodes[1].childNodes[0],a=d(document.querySelector("#edit-todo-title").value),c=r(document.querySelector("#edit-todo-description").value),s=n();a!==t.textContent&&c===o.textContent?s.some((e=>e.todoTitle===a))?l("Todo Cannot Have Same Title As Existing Todo"):a.length<10?l("Todo Name Cannot Be Less Than 10 Characters Long"):a.length>40?l("Todo Name Cannot Be Greater Than 40 Characters Long"):/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]+/.test(a)?l("Todo Name Cannot Contain Any Special Characters"):b(t,o,a,c):a===t.textContent&&c!==o.textContent?c.length<20?l("Todo Description Cannot Be Less Than 20 Characters Long"):c.length>300?l("Todo Description Cannot Be Greater Than 300 Characters Long"):b(t,o,a,c):a!==t.textContent&&c!==o.textContent?s.some((e=>e.todoTitle===a))?l("Todo Cannot Have Same Title As Existing Todo"):a.length<10?l("Todo Name Cannot Be Less Than 10 Characters Long"):a.length>40?l("Todo Name Cannot Be Greater Than 40 Characters Long"):/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]+/.test(a)?l("Todo Name Cannot Contain Any Special Characters"):c.length<20?l("Todo Description Cannot Be Less Than 20 Characters Long"):c.length>300?l("Todo Description Cannot Be Greater Than 300 Characters Long"):b(t,o,a,c):b(t,o,a,c)})),document.querySelector(".delete-todo-button").addEventListener("click",(()=>{(()=>{const e=N(),t=e.childNodes[0].childNodes[0].childNodes[0].textContent;c.remove(e),c.layout(),(e=>{const t=[...JSON.parse(localStorage.getItem("todosArray"))].filter((t=>t.todoTitle!==e));localStorage.setItem("todosArray",JSON.stringify(t))})(t),y()})()})),document.querySelector(".delete-all-todo-button").addEventListener("click",(()=>{(()=>{const e=[...JSON.parse(localStorage.getItem("todosArray"))].filter((e=>!1===e.todoDone));localStorage.setItem("todosArray",JSON.stringify(e))})(),document.querySelectorAll(".todo").forEach((e=>{e.childNodes[0].childNodes[0].classList.contains("done")&&c.remove(e)})),c.layout(),L()}))};(()=>{const e=document.querySelector(".start-screen-container"),t=document.querySelector(".start-screen-btn");0!==localStorage.length&&(e.style.display="none"),t.addEventListener("click",(()=>{e.classList.add("hide-start-screen")}))})(),(()=>{if(null===localStorage.getItem("categoriesArray")){const e=[{category:"default"},{category:null},{category:null},{category:null}];localStorage.setItem("categoriesArray",JSON.stringify(e))}if(null===localStorage.getItem("todosArray")){const e=[{todoTitle:"Default Todo",todoDescription:"This is a default todo.",todoCategory:"default",todoDone:!1}];localStorage.setItem("todosArray",JSON.stringify(e))}})(),f(),document.querySelectorAll(".delete-all-done-todos-btn, .cancel-delete-all-todo-button").forEach((e=>{e.addEventListener("click",(()=>{L()}))})),(()=>{const e=document.querySelectorAll(".edit-categories-btn, .cancel-edit-categories-button"),t=document.querySelector(".edit-categories-container");e.forEach((e=>{e.addEventListener("click",(()=>{t.classList.toggle("show-edit-categories")}))}))})(),document.querySelector(".cancel-delete-category-button").addEventListener("click",(()=>{S()})),document.querySelectorAll(".add-todo-btn, .cancel-add-new-todo-button").forEach((e=>{e.addEventListener("click",(()=>{t().every((e=>null===e.category))?l("You Must Create A Category Before You Can Add A Todo"):m()}))})),document.querySelectorAll(".add-category-button, .cancel-add-category-button").forEach((e=>{e.addEventListener("click",(()=>{g()}))})),document.querySelector(".flash-error-button").addEventListener("click",(()=>{s.classList.toggle("flash-error-todo-popup")})),document.querySelector(".show-categories-btn").addEventListener("click",(()=>{window.scroll({top:0,behavior:"smooth"})})),(()=>{const n=document.querySelector(".add-add-category-button"),a=document.querySelector("#add-category-title");n.addEventListener("click",(()=>{const n=a.value.trim().toLowerCase();-1===t().findIndex((e=>null===e.category))?l("You Cannot Have More Than 4 Categories"):t().some((e=>e.category===n))?l("Category Cannot Have Same Name As Existing Category"):n.includes(" ")?l("Category Name Cannot Contain Spaces Between Letters"):n.length<3?l("Category Name Cannot Be Less Than 3 Letters Long"):n.length>15?l("Category Name Cannot Be Greater Than 15 Letters Long"):/[^a-z]/i.test(n)?l("Category Name Can Only Contain Letters"):(n=>{const a=t().findIndex((e=>null===e.category));if(-1!==a){const t=(e=>({category:e}))(n);o(a,t),e(),g(),setTimeout((()=>{f(),c.arrange({filter:"*"}),e()}),550)}})(n)}))})(),A(),n().forEach((e=>{const o=t().findIndex((t=>t.category===e.todoCategory))+1;c.insert(T(e.todoCategory,o,e.todoTitle,e.todoDescription,e.todoDone))})),h(),p(),C(),q(),window.addEventListener("load",(()=>{c.layout(),setTimeout((()=>{e()}),1800)}))}();